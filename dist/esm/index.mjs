function t(t,e,r,n,u,a,i){try{var o=t[a](i),l=o.value}catch(t){return void r(t)}o.done?e(l):Promise.resolve(l).then(n,u)}function e(e){return function(){var r=this,n=arguments;return new Promise((function(u,a){function i(e){t(l,u,a,i,o,"next",e)}function o(e){t(l,u,a,i,o,"throw",e)}var l=e.apply(r,n);i(void 0)}))}}function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r.apply(this,arguments)}function n(t,e,r){if(1===e.length)return t[e[0]]=r,t;for(var n=t,u=0;u<e.length;u++){var a=e[u];if(u===e.length-1)n[a]=r;else{var i=n[a];n=n[a]=null!=i?i:isNaN(e[u+1])?{}:[]}}}function u(t){var{scope:e}=t,n=function(t,e){if(null==t)return{};var r,n,u={},a=Object.keys(t);for(n=0;n<a.length;n++)r=a[n],0>e.indexOf(r)&&(u[r]=t[r]);return u}(t,G);return H(F,{scope:e},H(a,r({},n)))}function a(t){var e=c(t.atom);return"render"in t?t.render(e):H(t.component,r({},e))}function i(t){var e=k(t.atom,t.scope);return _(t.atom,t.initialValue,t.scope),"render"in t?t.render(e.props,e.state,e.actions):H(t.component,e.props)}function o(t){var e=j(t.atom,t.scope),r=S(t.atom,t.scope);return _(t.atom,t.initialValue,t.scope),"render"in t?t.render(e,r):H(t.component,{state:e,actions:r})}function l(t){return++t}function s(t){return++t}function v(t){function r(t,e,r){return a.apply(this,arguments)}function*u(t,r,n){function*u(e){var u,a=t(e),i=t(a.value),o=t(a.dirty),l=t(a._validateCount)+1;r(a._validateCount,l),"user"!==n&&"submit"!==n||r(a.touched,1);var s,v,c=null===(u=a._validateCallback)||void 0===u?void 0:u.call(a,{get:t,value:i,dirty:o,touched:t(a.touched),event:n});return w(c)?(r(a.validateStatus,"validating"),s=null!==(v=yield c)&&void 0!==v?v:t(a.errors)):s=null!=c?c:t(a.errors),l===t(a._validateCount)&&(r(a.errors,s),r(a.validateStatus,s.length>0?"invalid":"valid")),s&&s.length?0:1}var a=t(i),o=[];A(a,(t=>{function r(){return(r=e(u)).apply(this,arguments)}o.push(function(t){return r.apply(this,arguments)}(t))})),yield Promise.all(o)}function a(){return(a=e(u)).apply(this,arguments)}var i=N(t),o=D((t=>{var e=t(i),r={};return A(e,((e,u)=>{var a=t(e);n(r,u,t(a.value))})),r})),v=D((t=>{var e=t(i),r="valid";return A(e,(e=>{var n=t(e),u=t(n.validateStatus);return"validating"===u?(r="validating",0):"invalid"===u?(r="invalid",0):void 0})),r})),c=D(null,(function(t,e,n){void 0===n&&(n="user"),n&&r(t,e,n)})),d=D((t=>{var e=t(i),r={};return A(e,((e,u)=>{var a=t(e);n(r,u,t(a.errors))})),r})),f=D(0),p=D(0),m=D("idle"),h=D(null,((t,n,u)=>{function*a(){var e=t(p)+1;if(n(p,e),n(f,l),yield r(t,n,"submit"),"invalid"===t(v))return e===t(p)&&n(m,"idle");var a=u(t(o));try{w(a)&&(e===t(p)&&n(m,"submitting"),yield a)}catch(t){}finally{e===t(p)&&n(m,"submitted")}}function i(){return(i=e(a)).apply(this,arguments)}!function(){i.apply(this,arguments)}()})),y=D((t=>{var e=t(i),r=0;return A(e,(e=>{var n=t(e);if(r=t(n.dirty))return 0})),r})),b=D((t=>{var e=t(i),r={};return A(e,((e,u)=>{var a=t(e);n(r,u,t(a.touched))})),r})),g=D(null,((t,e)=>{A(t(i),(r=>{var n=t(r);e(n.reset)})),e(p,s),e(m,"idle")}));return D({fields:i,values:o,errors:d,dirty:y,touchedFields:b,validate:c,validateStatus:v,submit:h,submitStatus:m,submitCount:f,reset:g})}function c(t,e){function r(){i("user")}var n=T(t,e),u=T(n.fields,e),a=V(n.reset,e),i=V(n.validate,e),o=V(n.submit,e),[,l]=I();return z.useMemo((()=>({fieldAtoms:u,validate(){l(r)},reset:a,submit(t){function e(){o(t)}return t=>{null==t||t.preventDefault(),l(e)}}})),[u,i,a,o])}function d(t,e){var r=T(t,e),n=T(r.fields,e),u=T(r.submitCount,e),a=T(r.submitStatus,e),i=T(r.validateStatus,e),o=T(r.values,e),l=T(r.errors,e),s=T(r.dirty,e),v=T(r.touchedFields,e);return z.useMemo((()=>({fieldAtoms:n,values:o,errors:l,dirty:s,touchedFields:v,submitCount:u,submitStatus:a,validateStatus:i})),[n,o,l,s,v,u,a,i])}function f(t,e){function r(){i("user")}var n=T(t,e),u=V(n.fields,e),a=V(n.reset,e),i=V(n.validate,e),o=V(n.submit,e),l=z.useCallback((t=>e=>{null==e||e.preventDefault(),o(t)}),[o]),[,s]=I();return z.useMemo((()=>({updateFields:u,reset:a,validate(){s(r)},submit:l})),[u,a,i,l])}function p(t,e){var r=T(t,e);return T(r.errors,e)}function m(t,e){var r=T(t,e);return T(r.values,e)}function h(t,e){var r=T(t),n=T(r.submitStatus,e),u=T(r.validateStatus,e);return z.useMemo((()=>({submitStatus:n,validateStatus:u})),[n,u])}function y(t,e){var[,r]=I(),n=T(t,e),u=V(n.submit,e);return z.useCallback((t=>e=>{null==e||e.preventDefault(),r((()=>{u(t)}))}),[u])}function b(t){return++t}function g(t){var r,n=N(t.name),u=N(t.value),a=N(null!==(r=t.touched)&&void 0!==r?r:0),i=D((e=>e(u)!==t.value)),o=D([]),l=D(0),s=D("valid"),v=D(null,(function(r,n,v){function*c(){var e;if(v){var c=r(l)+1;n(l,c);var d=r(i),f=r(u);"user"!==v&&"submit"!==v||n(a,1);var p,m=[],h=null===(e=t.validate)||void 0===e?void 0:e.call(t,{get:r,dirty:d,touched:r(a),value:f,event:v});w(h)?(c===r(l)&&n(s,"validating"),m=null!==(p=yield h)&&void 0!==p?p:r(o)):m=null!=h?h:r(o),c===r(l)&&(n(o,m),n(s,m.length>0?"invalid":"valid"))}}function d(){return(d=e(c)).apply(this,arguments)}void 0===v&&(v="user"),function(){d.apply(this,arguments)}()})),c=D(null),d=D(null,((t,e)=>{e(o,[]),e(a,B),e(u,B),e(l,b),e(s,"valid")}));return D({name:n,value:u,touched:a,dirty:i,validate:v,validateStatus:s,errors:o,reset:d,ref:c,_validateCallback:t.validate,_validateCount:l})}function S(t,e){function r(){s("user")}function n(){s("change")}function u(){s("touch")}var a=T(t,e),i=V(a.value,e),o=V(a.touched,e),l=V(a.errors,e),s=V(a.validate,e),v=V(a.reset,e),c=T(a.ref,e),[,d]=I();return z.useMemo((()=>({validate(){d(r)},setValue(t){i(t),d(n)},setTouched(t){o(t),t&&d(u)},setErrors:l,focus(){null==c||c.focus()},reset:v})),[l,v,s,i,o,c])}function C(t,e){function r(){v("blur")}function n(){v("change")}var u=T(t,e),a=T(u.name,e),[i,o]=E(u.value,e),l=V(u.touched,e),s=T(u.validateStatus,e),v=V(u.validate,e),c=V(u.ref,e),[,d]=I();return z.useMemo((()=>({name:a,value:i,"aria-invalid":"invalid"===s,ref:c,onBlur(){l(1),d(r)},onChange(t){o(t.target.value),d(n)}})),[a,i,s,c,l,v,o])}function j(t,e){var r=T(t,e),n=T(r.value,e),u=T(r.touched,e),a=T(r.dirty,e),i=T(r.validateStatus,e),o=T(r.errors,e);return z.useMemo((()=>({value:n,touched:u,dirty:a,validateStatus:i,errors:o})),[n,u,a,i,o])}function M(t,e){var r=T(t,e);return T(r.value,e)}function O(t,e){var r=T(t,e);return T(r.errors,e)}function _(t,e,r){var n=T(t,r);q(void 0===e?[]:[[n.value,e]],r)}function k(t,e){var r=C(t,e),n=S(t,e),u=j(t,e);return z.useMemo((()=>({props:r,actions:n,state:u})),[r,n,u])}function P(t){return t()}function w(t){return"object"==typeof t&&"function"==typeof t.then}function x(t){return null!==t&&"object"==typeof t&&("function"==typeof t.read||"function"==typeof t.write)}function A(t,e,r){for(var n in void 0===r&&(r=[]),t){r.push(n);var u=t[n];if(x(u)){if(0==e(u,r))return}else if(Array.isArray(u))for(var a in u){r.push(a);var i=u[a];if(x(i)){if(0==e(i,r))return}else A(i,e,r);r.pop()}else"object"==typeof u&&A(u,e,r);r.pop()}}import{Provider as F,atom as D,useAtomValue as T,useSetAtom as V,useAtom as E}from"jotai";export{Provider}from"jotai";import{atomWithReset as N,RESET as B,useHydrateAtoms as q}from"jotai/utils";import*as z from"react";var G=["scope"],H=z.createElement,I="function"==typeof z.useTransition?z.useTransition:()=>[0,P];export{o as Field,u as Form,i as InputField,g as fieldAtom,v as formAtom,k as useFieldAtom,S as useFieldAtomActions,O as useFieldAtomErrors,_ as useFieldAtomInitialValue,C as useFieldAtomProps,j as useFieldAtomState,M as useFieldAtomValue,c as useFormAtom,f as useFormAtomActions,p as useFormAtomErrors,d as useFormAtomState,h as useFormAtomStatus,y as useFormAtomSubmit,m as useFormAtomValues,A as walkFields};
//# sourceMappingURL=index.mjs.map
